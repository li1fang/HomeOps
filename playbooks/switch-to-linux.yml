- name: Windows -> Linux (one-time boot), orchestrated from control
  hosts: controllers
  gather_facts: false
  vars:
    win_host: ws-01-win
    linux_host: ws-01-linux
    ps_file: 'C:\ops\to-linux.ps1'

  tasks:
    - name: Trigger to-linux.ps1 on Windows
      ansible.windows.win_shell: |
        Start-Process -FilePath powershell.exe -ArgumentList '-NoProfile -NonInteractive -ExecutionPolicy Bypass -File "{{ ps_file }}"' -WindowStyle Hidden
      delegate_to: "{{ win_host }}"
      async: 30
      poll: 0
    # ... 后续的 wait_for 和 ping 任务 ...
